@import "tailwindcss";
/* Источники для purge (v4) */
@source "../../views/**/*.php" "../../views/**/*.html" "../../public/**/*.php" "../../public/**/*.html" "../../public/**/*.{js,ts}";

/* Дополнительные кастомные слои можно добавлять ниже */
@layer utilities {
	/* Ручные override для class-based dark, т.к. сейчас используется media-вариант */
	.dark .dark\:block { display: block !important; }
	.dark .dark\:hidden { display: none !important; }
	.dark .dark\:bg-gray-700 { background-color: var(--color-gray-700) !important; }
	.dark .dark\:bg-gray-200 { background-color: var(--color-gray-200) !important; }
	.dark .dark\:translate-x-8 { --tw-translate-x: calc(var(--spacing) * 8); translate: var(--tw-translate-x) var(--tw-translate-y) !important; }
	/* Плавные переходы основных поверхностей */
	html, body, header, .js-theme-toggle { transition: background-color .6s, color .6s, border-color .6s; }
	/* Бегунок с использованием CSS-переменной для смещения */
	/* Инвертировано: в светлой теме бегунок справа (солнце), в тёмной слева (луна) */
	/* Точное смещение рассчитано для w-20 (5rem) / pill w-8 (2rem) / padding-x-2 (0.5rem) / left-1 */
	/* Формула: shift = (width - padding*2 - pillWidth) - (leftOffset) = (5rem -1rem -2rem) - .25rem = 1.75rem -> но визуально центр половины = 2.25rem */
	.js-theme-toggle { --pill-shift: 2.25rem; }
	.dark .js-theme-toggle { --pill-shift: 0rem; }
	.theme-pill { transform: translateX(var(--pill-shift)); transition: transform .45s cubic-bezier(.4,0,.2,1), background-color .45s; }
	/* Вертикальное смещение бегунка (положительное значение опускает его чуть ниже) */
	.theme-pill { --pill-raise: -0.05rem; transform: translate(var(--pill-shift), var(--pill-raise)); z-index:1; }
	/* Акцент активной стороны через прозрачное свечение */
	/* Свечение смещаем под активную сторону (светлая справа, тёмная слева) */
	/* Подсветка отключена по просьбе пользователя */
	.theme-active-glow { display:none !important; }
	/* Иконки – мягкое приглушение неактивной */
	.js-theme-toggle .icon-moon, .js-theme-toggle .icon-sun { transition: opacity .45s; }
	/* Иконки немного темнее в светлой теме (повышаем читаемость) */
	.js-theme-toggle .icon-moon { opacity: .6; }
	.js-theme-toggle .icon-sun { opacity: 1; }
	.dark .js-theme-toggle .icon-moon { opacity: 1; }
	.dark .js-theme-toggle .icon-sun { opacity: .4; }
	/* Убираем стандартный blue highlight на мобильных */
	.js-theme-toggle { -webkit-tap-highlight-color: transparent; }
	/* Опционально: уменьшение движения при prefers-reduced-motion */
	@media (prefers-reduced-motion: reduce) {
		.theme-pill, html, body, header, .js-theme-toggle { transition: none !important; }
	}
	/* Базовые цвета страницы */
	body { background-color: var(--color-white); color: var(--color-gray-700); }
	.dark body { background-color: var(--color-gray-800); color: var(--color-gray-200); }
	/* Глобальные цвета текста */
	body, header, nav, a, button, p, span, li { color: var(--color-gray-700); }
	.dark body, .dark header, .dark nav, .dark a, .dark button, .dark p, .dark span, .dark li { color: var(--color-gray-200); }
	/* Header цвета */
	header { background-color: var(--color-white); }
	.dark header { background-color: var(--color-gray-800); }
	/* Mobile menu цвета */
	#mobileMenu { background-color: var(--color-white); }
	.dark #mobileMenu { background-color: var(--color-gray-800); }
	/* Плавное появление тени (усиливаем в dark) */
	header { box-shadow: 0 2px 4px -2px rgba(0,0,0,0.06), 0 4px 6px -1px rgba(0,0,0,0.08); }
	.dark header { box-shadow: 0 4px 8px -2px rgba(0,0,0,0.5), 0 6px 12px -2px rgba(0,0,0,0.35); }

	/* Фон и рамка переключателя темы */
	.js-theme-toggle { background-color: var(--color-gray-100); border: 1px solid var(--color-gray-300); }
	.dark .js-theme-toggle { background-color: var(--color-gray-800); border:1px solid var(--color-gray-600); }
	/* Цвет иконок внутри переключателя (делаем темнее в светлой, светлее в тёмной) */
	.js-theme-toggle .icon-moon, .js-theme-toggle .icon-sun { color: var(--color-gray-600); }
	.dark .js-theme-toggle .icon-moon, .dark .js-theme-toggle .icon-sun { color: var(--color-gray-100); }

	/* Dropdown панели – принудительное переключение цвета (аналог header override) */
	.dropdown-panel { background-color: var(--color-white); transition: background-color .6s, color .6s; }
	html.dark .dropdown-panel { background-color: var(--color-gray-700) !important; }
	html:not(.dark) .dropdown-panel { background-color: var(--color-white) !important; }
	.panel-flex { display: flex !important; }

	/* Hover для пунктов меню в тёмной теме: затемняем вместо светлого */
	.dark .hover-dark-bg:hover { background-color: rgba(255,255,255,0.08) !important; color: var(--color-gray-100) !important; }

	/* Мобильные пункты меню – более контрастный текст в светлой теме + плавный hover */
	.mobile-menu-item { color: var(--color-gray-800) !important; transition: background-color .25s, color .25s; }
	.dark .mobile-menu-item { color: var(--color-gray-200) !important; }
	.mobile-menu-item svg { color: var(--color-gray-600); }
	.dark .mobile-menu-item svg { color: var(--color-gray-300); }
	/* Лёгкое прозрачное наведение (светлая тема) */
	html:not(.dark) .mobile-menu-item:hover { background-color: rgba(0,0,0,0.025) !important; }
	/* В тёмной теме используем уже существующее затемнение через hover-dark-bg, fallback: */
	html.dark .mobile-menu-item:hover { background-color: rgba(255,255,255,0.06) !important; }
	/* Актив (нажатие) – чуть насыщеннее */
	html:not(.dark) .mobile-menu-item:active { background-color: rgba(0,0,0,0.06) !important; }
	html.dark .mobile-menu-item:active { background-color: rgba(255,255,255,0.08) !important; }
	/* Фокус клавиатурой */
	.mobile-menu-item:focus-visible { outline: 2px solid rgba(59,130,246,0.5); outline-offset: 2px; }

	/* Мобильные action-кнопки (переключатель + вход) */
	.mobile-action-btn { transition: background-color .25s, border-color .25s, color .25s; }
	html:not(.dark) .mobile-action-btn:active { background-color: rgba(0,0,0,0.08) !important; }
	html.dark .mobile-action-btn:active { background-color: rgba(255,255,255,0.12) !important; }
	.mobile-action-btn:focus-visible { outline: 2px solid rgba(59,130,246,0.55); outline-offset: 2px; }
}

/* Финальные принудительные override для header, чтобы игнорировать media (prefers-color-scheme) */
html:not(.dark) header { background-color: var(--color-white) !important; }
html.dark header { background-color: var(--color-gray-800) !important; }